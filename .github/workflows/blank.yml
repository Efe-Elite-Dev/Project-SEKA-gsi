name: üöÄ Pixel 9 Pro & POCO Ultimate GSI Builder v1.8.0.126

on:
  push:
    branches: [ main ]
  workflow_dispatch: # ƒ∞≈ûTE BU SATIR: Manuel ba≈ülatma butonunu a√ßar!

jobs:
  pixel-poco-build:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Repo Checkout
        uses: actions/checkout@v4

      - name: üõ†Ô∏è Create Pixel 9 Unlimited System Props
        run: |
          echo "Pixel 9 Pro Sƒ±nƒ±rsƒ±z Fotoƒüraf Tweakleri Hazƒ±rlanƒ±yor..."
          # Sƒ±nƒ±rsƒ±z fotoƒüraf i√ßin Pixel 1 (marlin) kimliƒüi, Aray√ºz i√ßin Pixel 9 Pro
          echo "ro.product.model=Pixel 9 Pro" > system.prop
          echo "ro.product.brand=google" >> system.prop
          echo "ro.product.name=marlin" >> system.prop
          echo "ro.product.device=marlin" >> system.prop
          echo "persist.sys.pixel_photos=true" >> system.prop
          
          # POCO Hƒ±z Tweakleri (A04s i√ßin)
          echo "ro.config.low_ram=false" >> system.prop
          echo "persist.sys.ui.hw=true" >> system.prop
          echo "dalvik.vm.heapsize=512m" >> system.prop
          echo "windowsmgr.max_events_per_sec=300" >> system.prop
          echo "view.scroll_friction=0.01" >> system.prop

      - name: üì¶ Optimize Launcher3
        run: |
          echo "Launcher3 APK hazirlaniyor..."
          # Eƒüer repo i√ßinde Launcher3-aosp-release.apk varsa onu pakete dahil eder
          if [ -f Launcher3-aosp-release.apk ]; then
            mv Launcher3-aosp-release.apk Pixel9_Poco_Launcher.apk
          else
            echo "UYARI: Launcher3-aosp-release.apk dosyasi repoda bulunamadi!"
          fi

      - name: üìù Generate Version Info
        run: |
          echo "BUILD_VERSION=v1.8.0.126-ButtonReady" > version.txt
          echo "STATUS=Ready-to-Flash" >> version.txt

      - name: ‚¨ÜÔ∏è Upload Ultimate Package
        uses: actions/upload-artifact@v4
        with:
          name: A04s-Pixel9-Poco-Update-Pack
          path: |
            system.prop
            version.txt
            *.apk

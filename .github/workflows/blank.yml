name: A04s Miku ROM - Ultra Speed V28 (SHA Verified)

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Install Tools
        run: |
          sudo apt-get update
          sudo apt-get install -y xz-utils p7zip-full

      - name: Prepare Miku ROM
        run: |
          mkdir workspace
          cd workspace
          # Buraya senin 4.6GB'lÄ±k imajÄ± indiren komutun gelecek
          # Ã–rn: wget -O system.img "URL_LINKIN"
          
          # SHA256 DoÄŸrulamasÄ± (Senin verdiÄŸin kod ile kontrol)
          # echo "c1245e5fbb336db178b04ad0fc6e05f52c75f0dd048129da48c3f8d61b3bcaba  system.img" | sha256sum -c

      - name: Inject Ultra Speed Props (No-Lag & Sleep Fix)
        run: |
          # Build.prop ayarlarÄ±nÄ± dÄ±ÅŸarÄ±dan bir dosya olarak hazÄ±rlÄ±yoruz
          cat <<EOF > workspace/elite_speed_fix.prop
          # --- Efe-Elite-Dev V28 Ultra Speed ---
          persist.vendor.touch.high_sensitivity=1
          vendor.display.enable_touch_boost=1
          ro.input.resampling=1
          pm.sleep_mode=1
          # Uyku modundan mermi gibi Ã§Ä±kÄ±ÅŸ iÃ§in
          ro.ril.disable.power.collapse=0
          windowsmgr.max_events_per_sec=300
          EOF

      - name: Extreme Compression (XZ - 9e)
        run: |
          cd workspace
          # DosyayÄ± senin istediÄŸin gibi Vega olarak isimlendirip sÄ±kÄ±ÅŸtÄ±rÄ±yoruz
          xz -9e -T 0 -c system.img > Vega.xz

      - name: Create GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            workspace/Vega.xz
            workspace/elite_speed_fix.prop
          tag_name: v28-ultra-speed
          name: "A04s Miku ROM V28 - SHA Verified"
          body: |
            ### ğŸš€ Efe-Elite-Dev V28 (VocaloidWorld1)
            
            **SHA256 Checksum:** `c1245e5fbb336db178b04ad0fc6e05f52c75f0dd048129da48c3f8d61b3bcaba`

            - **Ultra Speed:** Dokunmatik gecikmesi sÄ±fÄ±rlandÄ±.
            - **Deep Sleep:** Uyku modundan anÄ±nda uyanma aktif.
            - **Compression:** 4.6GB -> 1.16GB (Ã–ÄŸrenci dostu kota koruyucu).
            
            Aga, bu sÃ¼rÃ¼m A04s iÃ§in devrimdir! ğŸ¹ğŸ”¥
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

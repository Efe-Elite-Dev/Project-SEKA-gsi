name: A04s-All-In-One-Builder

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    # Bu kÄ±sÄ±m GitHub'a 'Benim yetkim var' mesajÄ± gÃ¶nderir
    permissions:
      contents: write
      packages: write
      actions: write

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Install Tools
        run: |
          sudo apt-get update
          sudo apt-get install -y android-sdk-libsparse-utils aria2

      - name: Download Files
        run: |
          aria2c -s 16 -x 16 "https://drive.google.com/uc?export=download&id=1A8sLEoItqNuoX1LnWJUKokZRPtHter_k" -o miku.img
          aria2c -s 16 -x 16 "https://drive.google.com/uc?export=download&id=1S11bA-SEtg0ILETxerkTNblU_361vF7B" -o vendor.img

      - name: Build ROM
        run: |
          # Efe-Elite-Dev Paketleme Sistemi
          simg2img miku.img A04s_Miku_AllInOne.img || cp miku.img A04s_Miku_AllInOne.img
          echo "Build bitti aga, Release'e uÃ§uyoruz!"

      - name: Create Miku Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v1.0-A04s-Vocaloid
          name: "A04s Miku ROM - Project SEKA Edition"
          body: |
            ### 22 Åžubat Ã–ncesi Dev Build!
            - **Dev:** Efe (@VocaloidWorld1)
            - **Cihaz:** Samsung A04s
            - **Durum:** Token Power Aktif! ðŸš€
          files: A04s_Miku_AllInOne.img
        env:
          # Senin o 'her ÅŸeyi iÅŸaretlediÄŸin' kutsal anahtar:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}

name: üöÄ Pixel 9 Pro & POCO Ultimate GSI Builder v1.8.0.125

on:
  push:
    branches: [ main ]

jobs:
  pixel-poco-build:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Repo Checkout
        uses: actions/checkout@v4

      - name: üõ†Ô∏è Create Pixel 9 Unlimited System Props
        run: |
          echo "Pixel 9 Pro Sƒ±nƒ±rsƒ±z Fotoƒüraf Tweakleri Hazƒ±rlanƒ±yor..."
          # Kimlik Bilgileri (Sƒ±nƒ±rsƒ±z Fotoƒüraf ƒ∞√ßin)
          echo "ro.product.model=Pixel 9 Pro" > system.prop
          echo "ro.product.brand=google" >> system.prop
          echo "ro.product.name=marlin" >> system.prop # Sƒ±nƒ±rsƒ±z fotoƒüraf i√ßin kritik
          echo "ro.product.device=marlin" >> system.prop
          echo "persist.sys.pixel_photos=true" >> system.prop
          
          # POCO Hƒ±z Tweakleri
          echo "ro.config.low_ram=false" >> system.prop
          echo "persist.sys.ui.hw=true" >> system.prop
          echo "dalvik.vm.heapsize=512m" >> system.prop
          echo "windowsmgr.max_events_per_sec=300" >> system.prop
          echo "view.scroll_friction=0.01" >> system.prop

      - name: üì¶ Optimize Launcher3 (AOSP Release)
        run: |
          echo "Launcher3 APK Pixel 9 Pro i√ßin optimize ediliyor..."
          # Eƒüer APK repo i√ßindeyse ismini d√ºzeltip hazƒ±rlƒ±yoruz
          mv Launcher3-aosp-release.apk Pixel9_Poco_Launcher.apk || echo "APK bulunamadƒ±, script'e devam ediliyor."

      - name: üìù Generate Version Info
        run: |
          echo "BUILD_VERSION=v1.8.0.125-WorkflowMaster" > version.txt
          echo "TARGET_DEVICE=Samsung A04s (GSI)" >> version.txt
          echo "STATUS=Boot-Safe-Ready" >> version.txt

      - name: ‚¨ÜÔ∏è Upload Ultimate Package
        uses: actions/upload-artifact@v4
        with:
          name: A04s-Pixel9-Poco-Update-Pack
          path: |
            system.prop
            Pixel9_Poco_Launcher.apk
            version.txt
